(this["webpackJsonpstick-it"]=this["webpackJsonpstick-it"]||[]).push([[0],{104:function(e,t,a){},278:function(e,t,a){},279:function(e,t,a){},280:function(e,t,a){},281:function(e,t,a){},282:function(e,t,a){},283:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(93),s=a.n(c),i=(a(104),a(16)),o=a(5),u=a(17),l=a(94),d=function(e){var t=e.color,a=e.handleColorChange;return r.a.createElement("div",{style:{position:"absolute",top:"150%",right:"-5px"}},r.a.createElement(l.GithubPicker,{color:t,onChange:a,triangle:"top-right",colors:["#FCCB00","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6"]}))},m=a(98),p=function(e,t){var a=t.type,n=t.payload;switch(a){case"ADD_STICKER":return Object(o.a)({},e,{stickers:[n].concat(Object(m.a)(e.stickers))});case"EDIT_STICKER":var r=n.id,c=n.key,s=n.value;return Object(o.a)({},e,{stickers:e.stickers.map((function(e){return e.id===r&&(e[c]=s),e}))});case"REMOVE_STICKER":return Object(o.a)({},e,{stickers:e.stickers.filter((function(e){return e.id!==n}))});case"TOGGLE_THEME":return Object(o.a)({},e,{theme:Object(o.a)({},e.theme,{isLightTheme:!n})});case"SIGN_IN":var i=n.user,u=n.stickers,l=n.settings,d=l.isLightTheme,p=l.language;return Object(o.a)({},e,{user:Object(o.a)({},i,{isLogged:!0}),stickers:u,theme:Object(o.a)({},e.theme,{isLightTheme:d}),localization:Object(o.a)({},e.localization,{language:p}),authError:null});case"SIGN_IN_ERROR":return Object(o.a)({},e,{authError:n});case"SIGN_OUT":return n;default:return e}},h={theme:{isLightTheme:!1,dark:{background:"#052b3c",color:"#fff"},light:{background:"#fff",color:"#052b3c"}},localization:{language:"en"},stickers:[],user:{uid:null,isLogged:!1},authError:null},f=Object(n.createContext)(),g=function(){return JSON.parse(localStorage.getItem("StickIt"))||h},k=function(e){var t=Object(n.useReducer)(p,h,g),a=Object(u.a)(t,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){localStorage.setItem("StickIt",JSON.stringify(c))})),r.a.createElement(f.Provider,{value:Object(o.a)({},c,{dispatch:s})},e.children)},b=a(2),E=a.n(b),_=a(95),v=a(96),w=a(6),y=a.n(w),x=(a(270),a(272),a(284),{apiKey:"AIzaSyC1OUIP1mhGcI6HF2dFhAZTemforCy-pu4",authDomain:"stickit-edbe9.firebaseapp.com",databaseURL:"https://stickit-edbe9.firebaseio.com",projectId:"stickit-edbe9",storageBucket:"stickit-edbe9.appspot.com",messagingSenderId:"210064489150",appId:"1:210064489150:web:4a80f6691650254d5bfcef",measurementId:"G-1WR7GSB1SH"}),S=new(function(){function e(){Object(_.a)(this,e),this.signInWithEmail=function(e,t){return y.a.auth().signInWithEmailAndPassword(e,t).catch((function(e){return e}))},this.signInWithGoogle=function(){var e;return E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new y.a.auth.GoogleAuthProvider,t.next=3,E.a.awrap(y.a.auth().signInWithPopup(e).catch((function(e){return e.message})));case 3:case"end":return t.stop()}}))},y.a.initializeApp(x),this.auth=y.a.auth(),this.db=y.a.firestore(),this.storage=y.a.storage()}return Object(v.a)(e,[{key:"signUp",value:function(e,t){return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(y.a.auth().createUserWithEmailAndPassword(e,t).catch((function(e){return alert(e.message)})));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}))}},{key:"logout",value:function(){return E.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.awrap(y.a.auth().signOut().catch((function(e){return alert(e.message)})));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}))}},{key:"addSticker",value:function(e,t){var a;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.a.awrap(y.a.firestore().collection("data").doc(e).collection("stickers").doc(t.id).set(t).catch((function(e){return alert(e.message)})));case 2:return a=n.sent,n.abrupt("return",a);case 4:case"end":return n.stop()}}))}},{key:"editSticker",value:function(e,t){var a;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.a.awrap(y.a.firestore().collection("data").doc(e).collection("stickers").doc(t.id).set(t,{merge:!0}).catch((function(e){return alert(e.message)})));case 2:return a=n.sent,console.log("Sticker Updated"),n.abrupt("return",a);case 5:case"end":return n.stop()}}))}},{key:"deleteSticker",value:function(e,t){var a;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.a.awrap(y.a.firestore().collection("data").doc(e).collection("stickers").doc(t).delete().catch((function(e){return alert(e.message)})));case 2:return a=n.sent,console.log("Sticker Deleted"),n.abrupt("return",a);case 5:case"end":return n.stop()}}))}},{key:"updateSettings",value:function(e,t){var a;return E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E.a.awrap(y.a.firestore().collection("data").doc(e).collection("settings").doc("common").set(t,{merge:!0}).catch((function(e){return alert(e.message)})));case 2:return a=n.sent,console.log("Settings Updated"),n.abrupt("return",a);case 5:case"end":return n.stop()}}))}},{key:"getSettings",value:function(e){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(y.a.firestore().collection("data").doc(e).collection("settings").doc("common").get().catch((function(e){return alert(e.message)})));case 2:return t=a.sent,a.abrupt("return",t.data());case 4:case"end":return a.stop()}}))}},{key:"getStickers",value:function(e){var t;return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return t=[],a.next=3,E.a.awrap(y.a.firestore().collection("data").doc(e).collection("stickers").get().catch((function(e){return alert(e.message)})));case 3:return a.sent.forEach((function(e){return t.push(e.data())})),a.abrupt("return",t);case 6:case"end":return a.stop()}}))}}]),e}()),I=a(97),N=a.n(I),O=function(e,t,a){var n,r,c,s,i;return E.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,E.a.awrap(S.signInWithEmail(t,a));case 2:if(!(n=o.sent).user){o.next=18;break}return r=n.user.uid,c="https://www.globalipattorneys.com/storage/images/noavatar.png",o.next=8,E.a.awrap(S.getStickers(r));case 8:return s=o.sent,o.next=11,E.a.awrap(S.getSettings(r));case 11:if(o.t0=o.sent,o.t0){o.next=14;break}o.t0={isLightTheme:!1,language:"en"};case 14:i=o.t0,e({type:"SIGN_IN",payload:{user:{uid:r,email:t,photoURL:c},stickers:s,settings:i}}),o.next=19;break;case 18:e({type:"SIGN_IN_ERROR",payload:n.message});case 19:case"end":return o.stop()}}))},C=function(e){var t,a,n,r,c,s,i;return E.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,E.a.awrap(S.signInWithGoogle());case 2:return t=o.sent,a=t.user,n=a.uid,r=a.email,c=a.photoURL,o.next=6,E.a.awrap(S.getStickers(n));case 6:return s=o.sent,o.next=9,E.a.awrap(S.getSettings(n));case 9:if(o.t0=o.sent,o.t0){o.next=12;break}o.t0={isLightTheme:!1,language:"en"};case 12:i=o.t0,e({type:"SIGN_IN",payload:{user:{uid:n,email:r,photoURL:c},stickers:s,settings:i}});case 14:case"end":return o.stop()}}))},j=(a(278),function(e){var t=e.sticker,a=Object(n.useContext)(f),c=a.user,s=a.dispatch,l=t.id,m=t.color,p=t.isPinned,h={title:t.title,text:t.text,showColorPicker:!1},g=Object(n.useState)(h),k=Object(u.a)(g,2),b=k[0],_=k[1],v=b.title,w=b.text,y=b.showColorPicker,x=function(e){var t=e.target,a=t.name,n=t.value;_(Object(o.a)({},b,Object(i.a)({},a,n)))},I=function(e){var t=e.target,a=t.name,n=t.value;N(a,n)},N=function(e,t){!function(e,t,a,n,r){E.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(!t){c.next=3;break}return c.next=3,E.a.awrap(S.editSticker(t,Object(i.a)({id:a},n,r)));case 3:e({type:"EDIT_STICKER",payload:{id:a,key:n,value:r}});case 4:case"end":return c.stop()}}))}(s,c.uid,l,e,t)},O=p?"sticker__btn icon-pin":"sticker__btn icon-pin-outline";return r.a.createElement("li",{className:"stickers__item sticker"},r.a.createElement("div",{className:"sticker__container",style:{backgroundColor:m}},r.a.createElement("div",{className:"sticker__header"},r.a.createElement("input",{className:"sticker__title",type:"text",value:v,name:"title",onChange:x,onBlur:I,placeholder:"Enter title..."}),r.a.createElement("div",{className:"sticker__controls"},r.a.createElement("button",{className:"sticker__btn icon-color-adjust",onClick:function(){_(Object(o.a)({},b,{showColorPicker:!y}))}},y?r.a.createElement(d,{color:m,handleColorChange:function(e){N("color",e.hex)}}):null),r.a.createElement("button",{className:O,onClick:function(){N("isPinned",!p)}}),r.a.createElement("button",{className:"sticker__btn icon-trash-empty",onClick:function(){!function(e,t,a){E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=3;break}return n.next=3,E.a.awrap(S.deleteSticker(t,a));case 3:e({type:"REMOVE_STICKER",payload:a});case 4:case"end":return n.stop()}}))}(s,c.uid,l)}}))),r.a.createElement("div",{className:"sticker__details"},r.a.createElement("textarea",{className:"sticker__text",name:"text",onChange:x,onBlur:I,type:"textarea",value:w,placeholder:"Enter text..."}))))}),L=(a(279),function(){var e=Object(n.useContext)(f).stickers,t=e.filter((function(e){return e.isPinned})),a=e.filter((function(e){return!1===e.isPinned}));return r.a.createElement(r.a.Fragment,null,t.length>0&&r.a.createElement("ul",{className:"sticker-list sticker-list--pinned"},t.map((function(e){return r.a.createElement(j,{sticker:e,key:e.id})}))),r.a.createElement("ul",{className:"sticker-list"},a.map((function(e){return r.a.createElement(j,{sticker:e,key:e.id})}))))}),T=(a(280),function(e){var t=e.isVisible,a=e.handleClose,c=e.handleSignInWithEmail,s=e.handleSignInWithGoogle,l=Object(n.useState)({email:"",password:""}),d=Object(u.a)(l,2),m=d[0],p=d[1],h=function(e){var t=e.target,a=t.name,n=t.value;p(Object(o.a)({},m,Object(i.a)({},a,n)))};return t&&r.a.createElement("div",{className:"modal__background"},r.a.createElement("div",{className:"modal"},r.a.createElement("div",{className:"modal__header"},r.a.createElement("h2",{className:"modal__title"},"Log In"),r.a.createElement("div",{className:"modal__controls"},r.a.createElement("button",{className:"modal__close",onClick:a},"X"))),r.a.createElement("div",{className:"modal__content"},r.a.createElement("form",{action:"",className:"login-form",onSubmit:function(e){e.preventDefault(),c(m.email,m.password)}},r.a.createElement("input",{className:"login-form__input",type:"email",name:"email",placeholder:"E-mail",onChange:h}),r.a.createElement("input",{className:"login-form__input",type:"password",name:"password",placeholder:"Password",onChange:h}),r.a.createElement("button",{className:"login-form__btn"},"Submit")),r.a.createElement("hr",null),r.a.createElement("button",{onClick:s},"Google"))))}),G=(a(281),function(){var e=Object(n.useContext)(f),t=e.user,a=t.uid,c=t.photoURL,s=t.isLogged,i=e.theme,o=i.isLightTheme,l=i.light,d=i.dark,m=e.dispatch,p=o?l:d;document.body.style.backgroundColor=p.background;var g=Object(n.useState)({showLogInForm:!1}),k=Object(u.a)(g,2),b=k[0],_=k[1],v=function(){_({showLogInForm:!b.showLogInForm})},w=o?"header__menu__btn icon-moon":"header__menu__btn icon-sun",y=c?"header__menu__btn header__menu__btn--login":"header__menu__btn icon-user";return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{style:p},r.a.createElement("div",{className:"wrapper header"},r.a.createElement("div",{className:"header__logo"},"StickIt"),r.a.createElement("div",{className:"header__menu"},r.a.createElement("button",{className:"header__menu__btn icon-plus",onClick:function(){!function(e,t){var a;E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(a={id:N()(),title:"",text:"",color:"#fef3bd",isPinned:!1},!t){n.next=4;break}return n.next=4,E.a.awrap(S.addSticker(t,a));case 4:e({type:"ADD_STICKER",payload:a});case 5:case"end":return n.stop()}}))}(m,a)},title:"Add New Sticker"}),r.a.createElement("button",{className:w,onClick:function(){!function(e,t,a){E.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t){n.next=3;break}return n.next=3,E.a.awrap(S.updateSettings(t,{isLightTheme:!a}));case 3:e({type:"TOGGLE_THEME",payload:a});case 4:case"end":return n.stop()}}))}(m,a,o)},title:o?"Dark":"Light"}),r.a.createElement("button",{className:y,onClick:function(){s?function(e){E.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.a.awrap(S.logout());case 2:e({type:"SIGN_OUT",payload:h});case 3:case"end":return t.stop()}}))}(m):v()},style:{backgroundImage:"url(".concat(c,")")}})))),r.a.createElement(T,{isVisible:b.showLogInForm,handleSignInWithEmail:function(e,t){return E.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,E.a.awrap(O(m,e,t));case 2:v();case 3:case"end":return a.stop()}}))},handleSignInWithGoogle:function(){return E.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.awrap(C(m));case 2:v();case 3:case"end":return e.stop()}}))},handleClose:v}))}),R=function(){var e=Object(n.useContext)(f).theme,t=e.isLightTheme,a=e.light,c=e.dark,s=t?a:c;return r.a.createElement("footer",{style:s},r.a.createElement("div",{className:"wrapper"},"\xa9 Serhii Tyshchenko, 2020"))},P=(a(282),function(){return r.a.createElement("div",{className:"App"},r.a.createElement(k,null,r.a.createElement(G,null),r.a.createElement("main",{className:"wrapper"},r.a.createElement(L,null)),r.a.createElement(R,null)))});s.a.render(r.a.createElement(P,null),document.getElementById("root"))},99:function(e,t,a){e.exports=a(283)}},[[99,1,2]]]);
//# sourceMappingURL=main.3239001b.chunk.js.map